<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1">

<meta name="author" content="Sarah Bauduin, Eliot McIntire" />


<title>Programming Guide NetLogoR</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>


<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>



<div class="fluid-row" id="header">


<h1 class="title">Programming Guide NetLogoR</h1>
<h4 class="author"><em>Sarah Bauduin, Eliot McIntire</em></h4>
<h4 class="date"><em>June, 17th 2016</em></h4>

</div>


<p>This document is based on the <a href="https://ccl.northwestern.edu/netlogo/docs/programming.html">NetLogo’s Programming Guide</a>. It describes how the NetLogo’s programming language is translated in the R language.</p>
<div id="netlogor-features" class="section level2">
<h2>NetLogoR features</h2>
<div id="world-and-agents" class="section level3">
<h3>World and agents</h3>
<p>In NetLogoR, the world is either a <code>worldMatrix</code> object (similar to a <code>matrix</code>) or a <code>worldArray</code> object (similar to an <code>array</code> which is a collection of matrices). It represents a two dimensional landscape, divided into a grid of square patches (i.e., the matrix cells) of resolution 1.</p>
<p>There are two types of agents in NetLogoR: the patches and the turtles. Patches cannot move whereas turtles can move. Patches are <code>matrix</code> objects with two columns <code>pxcor</code> and <code>pycor</code>, representing the spatial location (i.e., coordinates) of the center of the patches. See <code>help(&quot;worldMatrix-class&quot;)</code> for more details on the patch coordinates system. Turtles are defined by their coordinates <code>xcor</code> and <code>ycor</code> and data associated in the <code>agentMatrix</code> objects. Patches coordinates are always integers but turtles coordinates can have decimals (i.e., a turtle can be positioned anywhere on a patch).</p>
<p>Links are not implemented in NetLogoR.</p>
</div>
<div id="procedures" class="section level3">
<h3>Procedures</h3>
<p>In NetLogoR, functions act on the worlds and on the agents. Functions can modify or used them to compute some value. Functions available from the R software and from different packages can be used, as well as the functions from NetLogoR. Most of the NetLogoR functions are a translation into the R language of the NetLogo’s primitives (i.e., “built-in commands and reporters”). You can create new functions or wrap several existing functions into one. The rules to do so are imposed by the R language.</p>
<p>R functions take arguments which are R objects and values. Arguments are used to carry out actions and compute results.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">w1 &lt;-<span class="st"> </span><span class="kw">createWorld</span>(<span class="dt">minPxcor =</span> <span class="dv">0</span>, <span class="dt">maxPxcor =</span> <span class="dv">10</span>, <span class="dt">minPycor =</span> <span class="dv">0</span>, <span class="dt">maxPycor =</span> <span class="dv">10</span>) <span class="co"># create a world according to the given extent</span>
pDist &lt;-<span class="st"> </span><span class="kw">NLdist</span>(<span class="dt">agents =</span> <span class="kw">cbind</span>(<span class="dt">pxcor =</span> <span class="dv">0</span>, <span class="dt">pycor =</span> <span class="dv">0</span>), <span class="dt">agents2 =</span> <span class="kw">cbind</span>(<span class="dt">pxcor =</span> <span class="dv">1</span>, <span class="dt">pycor =</span> <span class="dv">1</span>, <span class="dt">world =</span> w1, <span class="dt">torus =</span> <span class="ot">TRUE</span>) <span class="co"># report the distance between the patch [pxcor = 0, pycor = 0] and the patch [pxcor = 1, pycor = 1]</span></code></pre></div>
<p>In NetLogoR, the function arguments indicate which world and/or agents (i.e., patches and/or turtles) are involved in the function. For example, in the <code>NLdist</code> function, the argument <code>agents</code> takes one patch coordinates, the argument <code>agents2</code> takes another patch coordinates, the argument <code>world</code> takes a <code>worldMatrix</code> or a <code>worldArray</code> object to indicate in which world <code>agents</code> and <code>agents2</code> are located and the argument <code>torus</code> indicate that the world is wrapped.</p>
<p>The result/output of a function needs to be assigned to an object to be kept and re-used later in the model. Functions in R create new objects, they do not directly modify the ones given as arguments. For example, when moving turtles around using the <code>fd</code> function, the output of the function (i.e., the turtles with new coordinates) needs to be re-assigned to the turtles object.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t1 &lt;-<span class="st"> </span><span class="kw">createTurtles</span>(<span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">world =</span> w1) <span class="co"># create 10 turtles in the world w1</span>
t1 &lt;-<span class="st"> </span><span class="kw">fd</span>(<span class="dt">world =</span> w1, <span class="dt">turtles =</span> t1, <span class="dt">dist =</span> <span class="dv">1</span>) <span class="co"># move all the turtles by a distance of 1</span></code></pre></div>
<p>In NetLogo, pressing a button runs some code. To perform the button action in NetLogoR, the code must be sent to the R console to be executed. The code can be sent directly by the observer or by a scheduler function (e.g., see <code>SpaDES</code> package) which execute the code according to the schedule.</p>
<p>The R language uses <code>#</code> to add comments to the script. Comments make your code easier to read and understand, but they don’t affect its behavior.</p>
</div>
<div id="variables" class="section level3">
<h3>Variables</h3>
<p>R objects that are neither worlds, patches or turtles can be seen as global variables.</p>
<p>To create a global variable, you create an R object. E.g., <code>score &lt;- 15</code>.</p>
<p>Agent variables are places to store different values for an agent. An agent variable can be a patch or a turtle variable. A <code>worldMatrix</code> object holds only one variable (i.e., value) per patch. A <code>worldArray</code> object holds several variables per patch (i.e., from the different <code>worldMatrix</code> stacked). Turtles variables are stored by columns in the data of the <code>agentMatrix</code> object that represent them. You can have patch and turtle variables defined by the same name as they are not stored in the same object.</p>
<p>To create a new patch variable, you create a <code>worldMatrix</code> and assign values. The name of the object to which the world is assigned is treated as the name of the patch variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">pQuality &lt;-<span class="st"> </span><span class="kw">createWorld</span>(<span class="dt">minPxcor =</span> <span class="dv">0</span>, <span class="dt">maxPxcor =</span> <span class="dv">9</span>, <span class="dt">minPycor =</span> <span class="dv">0</span>, <span class="dt">maxPycor =</span> <span class="dv">9</span>, <span class="dt">data =</span> <span class="kw">runif</span>(<span class="dt">n =</span> <span class="dv">100</span>, <span class="dt">min =</span> <span class="dv">0</span>, <span class="dt">max =</span> <span class="dv">1</span>)) <span class="co"># for all patches, assign a random value between 0 and 1</span></code></pre></div>
<p>Several turtles variables built-in into NetLogo are created as the same time when creating turtles in NetLogoR: “xcor”, “ycor”, “who”, “heading”, “prevX”, “prevY”, “breed”, and “color”. New turtle variables can be created:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t1 &lt;-<span class="st"> </span><span class="kw">turtlesOwn</span> (<span class="dt">turtles =</span> t1, <span class="dt">tVar =</span> <span class="st">&quot;sex&quot;</span>, <span class="dt">tVal =</span> <span class="kw">c</span>(<span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;M&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>, <span class="st">&quot;F&quot;</span>)) <span class="co"># now each turtle in t1 have a &quot;sex&quot; variable</span></code></pre></div>
<p>Turtle’s breed is a turtle variable and you can have different breeds behaving differently. For example, you could have breeds called <code>sheep</code> and <code>wolf</code>, and have the wolves trying to eat the sheep. You can either specify different breeds in the same turtles object or create two objects, one sheep and one wolf.</p>
<p>You define turtles’ breed by filling the breed column when creating the turtles.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 &lt;-<span class="st"> </span><span class="kw">createTurtles</span>(<span class="dt">world =</span> w1, <span class="dt">n =</span> <span class="dv">10</span>, <span class="dt">breed =</span> <span class="kw">c</span>(<span class="kw">rep</span>(<span class="st">&quot;sheep&quot;</span>, <span class="dv">5</span>), <span class="kw">rep</span>(<span class="st">&quot;wolf&quot;</span>, <span class="dv">5</span>))) <span class="co"># 5 sheep and 5 wolves</span>
<span class="co"># OR</span>
sheep &lt;-<span class="st"> </span><span class="kw">createTurtles</span>(<span class="dt">world =</span> w1, <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">breed =</span> <span class="st">&quot;sheep&quot;</span>) <span class="co"># 5 sheep</span>
wolves &lt;-<span class="st"> </span><span class="kw">createTurtles</span>(<span class="dt">world =</span> w1, <span class="dt">n =</span> <span class="dv">5</span>, <span class="dt">breed =</span> <span class="st">&quot;wolf&quot;</span>) <span class="co"># 5 wolves</span></code></pre></div>
<p>Or you can modify the turtles’ breed after creation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">t2 &lt;-<span class="st"> </span><span class="kw">NLset</span>(<span class="dt">turtles =</span> t2, <span class="dt">agents =</span> <span class="kw">turtle</span>(t2, <span class="dt">who =</span> <span class="dv">0</span>), <span class="dt">var =</span> <span class="st">&quot;breed&quot;</span>, <span class="dt">val =</span> <span class="st">&quot;wolf&quot;</span>) <span class="co"># turtle 0 which was &quot;sheep&quot; became &quot;wolf&quot;</span></code></pre></div>
<p>Global variables are available for all agents. Patches and turtles variables are available to other agents if they can be identified by their coordinates or some other variables.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">of</span>(<span class="dt">world =</span> pQuality, <span class="dt">agents =</span> <span class="kw">patch</span>(pQuality, <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">0</span>,<span class="dv">0</span>), <span class="kw">c</span>(<span class="dv">0</span>,<span class="dv">1</span>,<span class="dv">2</span>))) <span class="co"># reports the pQuality value of the patches [pxcor = 0, pycor = 0], [pxcor = 0, pycor = 1] and [pxcor = 0, pycor = 2]</span></code></pre></div>
<p>Local variables may occur in NetLogoR as inherent to the R software. For example, variables only defined inside functions are local variables and therefore cannot be accessed outside of the functions.</p>
</div>
<div id="agentsets" class="section level3">
<h3>Agentsets</h3>
<p>An agentset is a set of agents and you can construct agentsets that contain only some patches or some turtles. An agentset cannot contain the two agent types (patches and turtles) at once. A patch agentset is a <code>matrix</code> that contains patches coordinates; a turtle agentset is an <code>agentMatrix</code> object containing turtles. Agentsets can then be passed on as arguments in functions. Agentsets can be redefined at any time.</p>
</div>
<div id="world-topology" class="section level3">
<h3>World topology</h3>
<p>By default, NetLogoR functions act as if the world is bounded and does not “wrap”. Patches on the sides of the world will have fewer than 8 neighbors and turtles will not move beyond the edges of the world. What happen to the turtles when they reach the edge of the world must be defined.</p>
<p>However you can make the world a torus (“wrap”), so that each patch has the same number of neighbor patches (some located on the other side of the world) and when a turtle moves past the edge of the world, it disappears and reappears on the opposite edge. The option for a torus world is an argument in some of the NetLogoR functions and can be set TRUE or FALSE.</p>
</div>
<div id="tick-counter" class="section level3">
<h3>Tick counter</h3>
<p>It is common that time passes in discrete steps. Time can be defined as a global variable in the model setup (e.g., <code>time &lt;- 0</code>) and then can be incremented in the model when needed (e.g., <code>time &lt;- time + 1</code>, at the end of the procedure affecting all the agents).</p>
<p>If a for-loop or a scheduler function (e.g., see <code>SpaDES</code> package) is used in the model, time does not have to be explicitely defined with a global variable and is handled internally.</p>
</div>
<div id="lists-and-strings" class="section level3">
<h3>Lists and strings</h3>
<p>Lists may be seen as global variables holding one or more values and strings may be seen as global variables holding characters. Lists and strings are inherent to the R language. Please see R manuals for any related questions.</p>
<p>NetLogo uses lists to store elements. In R, it is faster to use vectors when possible.</p>
</div>
<div id="math-and-random-numbers" class="section level3">
<h3>Math and random numbers</h3>
<p>R is a software dedicated for data management and statistical analyses. The notation and basic rules of math, as well as the random number generation, are inherent to the R software. Please see R manuals for any related questions.</p>
</div>
<div id="inputoutput" class="section level3">
<h3>Input/output</h3>
<p>Reading and writing files is inherent to the R language. Please see R manuals for any related questions on basic functions, as well as the different packages, for more complex functions to manage files.</p>
<p>In R, a file is loaded/opened by assigning its content to an R object. The R object can be read, used and modified but this does not affect the original file. The modified R object can later be written out as a file, either by overwritting the original file or by creating a new file.</p>
</div>
<div id="view-plot-screen-output" class="section level3">
<h3>View, plot, screen output</h3>
<p>There is no interface built-in as part of NetLogoR.</p>
<p>However, you can still plot the agent positions in the world (i.e., “view” in NetLogo) as well as any other plots (e.g., the number of turtles through time) on the R plot interface. You can also generate outputs on the screen using different functions. To do so, you need to specifically code for these procedures in the model using R functions and of different packages. Please refer to their manuals for any related questions.</p>
</div>
</div>
<div id="how-to-build-a-model-using-netlogor" class="section level2">
<h2>How to build a model using NetLogoR</h2>
<p>The following steps describe how to build a general NetLogo type model in R using NetLogoR. Examples of R scripts are available in the “examples” folder.</p>
<ul>
<li><p>Open a new R script (using RStudio or an adapted text editor like Tinn-R) to write the code of the model in it. Save it under the name of the model in an appropriate folder.</p></li>
<li><p>Start by naming and describing the model using the symbol <code>#</code> in front of each line to “comment” the information. This description section is not mandatory but very helpful. It can be considered like the “Info” tab in NetLogo but, in a R script, this section should be kept short and concise.</p></li>
<li><p>Load the needed packages (e.g., NetLogoR) with the function <code>library()</code>. This can be done at any time in the code section but must appear before using any functions from a package. It is convenient to load all the packages needed at the beginning.</p></li>
<li><p>Define the global variables as R objects. Global variables can be defined at any time in the code but it must be done before they are used. Buttons in NetLogo used to set variables must be defined as global variables at the beginning of the R script.</p></li>
<li><p>Create the world in which the agents will evolve with the function <code>createWorld()</code>. Defining the world’s extent in <code>createWorld()</code> is similar as going in the “Interface” tab in NetLogo and clicking on the “Settings” button to change the model settings.</p></li>
<li><p>Define and assign values to the patches when creating the world <code>createWorld(..., data = ...)</code> or after using the function <code>NLset()</code>. You can visualize the world by plotting it. As <code>plot</code> cannot handle <code>worldMatrix</code> objects, you need to convert it to a <code>Raster</code> object before: <code>plot(world2raster(nameWorld))</code>.</p></li>
<li><p>Create the turtles (i.e., moving agents) with the function <code>createTurtles()</code>. You can visualize the turtles by plotting them on the world. As <code>points</code> cannot handle <code>agentdMatrix</code> objects, you need to convert it to a <code>SpatialPointsDataFrame</code> object before: <code>points(turtles2spdf(nameTurtles), pch = 16)</code>.</p></li>
<li><p>Create the different procedures (i.e., functions affecting the agents) by using the NetLogoR functions, the R functions and some from other packages.</p></li>
<li><p>It is useful to test the different procedures individually with a small world and a few numbers of turtles to make sure the code is doing what we want it to do.</p></li>
<li><p>Then build the main procedure for the model. A for-loop or a scheduler function (e.g., see <code>SpaDES</code> package) can be used to manage time. The functions placed inside the for-loop or scheduler function will be iterated the number of time steps defined. The for-loop automatically increases the time step and the scheduler function internally manages time so no “tick” variable is necessary. Executing the for-loop of the scheduler function correponds in NetLogo as hitting the “Go” button in a forever mode. The visualization can be updated at each time step and/or new visualizations can be plotted at the end when the iterations are over. Remember than plotting takes time to be executed and slow down the model.</p></li>
</ul>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
